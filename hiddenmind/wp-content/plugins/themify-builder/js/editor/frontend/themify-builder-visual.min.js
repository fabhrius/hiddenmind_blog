((T,s,B,O,E,k)=>{"use strict";E.is_ajax_call=null;let h,g,p=!1,t;const a=new Map,_=new Map,e={visual(){E.Registry.on(this.id,"create",this.createEl).on(this.id,"recreate",this.recCeate).on(this.id,"preview",this.previewVisibility)},recCeate(){const t=O.createElement("span"),i=T.convert(this.el.querySelectorAll("[data-cid]")),s=[];t.className="tf_lazy tb_preview_component",this.el.prepend(t),i.unshift(this.el);for(let t=i.length-1;-1<t;--t){let e=E.Registry.get(i[t].getAttribute("data-cid"));e&&s.push(e.id)}return new Promise(e=>{E.bootstrap(s).then(()=>{t.remove(),E.Utils.setCompactMode(this.el.tfClass("module_column")),E.Utils.runJs(this.el),e(this.el)})})},createEl(e){const t=this.type,i=O.createElement("template"),s=(i.innerHTML=e,i.content.querySelector(".module_"+t)),l=s.classList,o=s.attributes,a="subrow"===t?this.el.tfClass("module_subrow")[0]:this.el;for(let e=l.length-1;-1<e;--e)a.classList.add(l[e]);for(let t=o.length-1;-1<t;--t){let e=o[t].name;"class"!==e&&a.setAttribute(e,o[t].value)}const r=s.tfClass("builder_row_cover")[0],n=s.tfClass("tbp_dc_styles")[0],d=s.tfClass(t+"-slider")[0],c=s.tfClass("tb_row_frame_wrap")[0],h=O.createDocumentFragment();if(r?.parentNode===s){const u=a.tfClass("builder_row_cover")[0];u!==k?u.replaceWith(r):h.appendChild(r)}if(c?.parentNode===s){const g=a.tfClass("tb_row_frame_wrap")[0];g!==k?g.replaceWith(c):h.appendChild(c)}if(n?.parentNode===s){const p=a.tfClass("tbp_dc_styles")[0];p!==k?p.replaceWith(n):a.appendChild(n)}if(d?.parentNode===s){const _=a.tfClass(t+"-slider")[0];_!==k?_.replaceWith(d):h.appendChild(d)}a.prepend(h)},previewVisibility(){const e=this.el,t=e.classList,i=this.get("mod_settings");E.isPreview?("hide_all"===i.visibility_all?t.add("hide-all"):("hide"===i.visibility_desktop&&t.add("hide-desktop"),"hide"===i.visibility_tablet&&t.add("hide-tablet"),"hide"===i.visibility_tablet_landscape&&t.add("hide-tablet_landscape"),"hide"===i.visibility_mobile&&t.add("hide-mobile")),i.custom_parallax_scroll_reverse&&(e.dataset.parallaxElementReverse=!0),i.custom_parallax_scroll_fade&&(e.dataset.parallaxFade=!0),i.custom_parallax_scroll_speed&&(e.dataset.parallaxElementSpeed=parseInt(i.custom_parallax_scroll_speed))):t.remove("hide-desktop","hide-tablet","hide-tablet_landscape","hide-mobile","hide-all")}},i={templateVisual(e){const t=E.template("builder-"+this.get("mod_name"));return t(e)},visual(){e.visual.call(this),E.Registry.on(this.id,"live",this.previewLive).on(this.id,"ajax",this.previewReload)},createEl(e){const t=O.createElement("template"),i=O.createDocumentFragment(),s=O.createElement("div"),l=O.createElement("div"),o=O.createElement("div"),a=O.createElement("div"),r=this.get("mod_name"),n=(t.innerHTML=e,t.content.querySelector(".module")),d=t.content.querySelector("#tb_module_styles"),c=t.content.querySelectorAll('link[rel="prefetch"]');if(n===k)return E.is_ajax_call||E.Registry.remove(this.id),!1;for(let e=c.length-1;-1<e;--e)c[e].remove();if(null!==d){const h=JSON.parse(d.innerText);for(let e in h)h[e].s&&T.loadCss(h[e].s,e,h[e].v)}while(null!==this.el.firstChild)this.el.lastChild.remove();a.className="tb_visibility_hint tf_overflow tf_abs_t tf_hide",s.className="tb_data_mod_name tf_overflow tf_textc tf_abs_t tf_hide",s.innerHTML=this.getName(),l.className="tf_plus_icon tb_column_btn_plus tb_module_btn_plus tb_disable_sorting tf_rel",o.className="tb_action_wrap tb_module_action tf_abs_t tf_box tf_hide",n.classList.add("module-"+r,"tb_"+this.id),n.appendChild(s),i.append(n,o,a,l),this.el.appendChild(i),this.fixSafariSrcSet(),this.visibilityLabel()},shortcodeToHTML(i){const l=[],s=themifyBuilder.available_shortcodes;let o=!1;for(let e=0,t=s.length;e<t;++e)i=wp.shortcode.replace(s[e],i,e=>{let t=wp.shortcode.string(e),i=T.hash(t),s="";return s=a.has(i)?a.get(i):(l.push(t),'<span class="tmp'+i+'">[loading shortcode...]</span>'),o=!0,s});if(o&&0<l.length){t&&!0===E.is_builder_ready&&t.abort(),t=new AbortController;const e={action:"tb_render_element_shortcode",shortcode_data:JSON.stringify(l)};E.LocalFetch(e,"json",{signal:t.signal}).then(e=>{if(e.success){const s=e.data.shortcodes,i=e.data.styles;if(i)for(let e=0,t=i.length;e<t;++e)T.loadCss(i[e].s+"?ver="+i[e].v,null,!1,null,i[e].m);for(let i=0,e=s.length;i<e;++i){let e=T.hash(s[i].key),t=O.createElement("template");t.innerHTML=s[i].html,this.el.tfClass("tmp"+e)[0].replaceWith(t.content),a.set(e,s[i].html),E.is_builder_ready&&E.Utils.runJs(this.el,"module",!0)}}})}return{content:i,found:o}},previewLive(a,r,n,d,c){return new Promise(e=>{E.is_ajax_call=!1,g&&!0===E.is_builder_ready&&g.abort(),(a=a||{}).cid=this.id;let t=null!==E.activeModel&&d,i,s=300;if(!t||!0===r){if(i=this.templateVisual(a),E.is_ajax_call)return void e();if(!0===r){const l=this.shortcodeToHTML(i);l.found&&(s=1e3,i=l.content,t=null)}}if(T.trigger("tbDisableInline"),t){const o=d.length;if(o===k)d.innerHTML=c;else for(let e=o-1;-1<e;--e)d[e].innerHTML=c;e()}else this.createEl(i),!0!==p&&!0===E.is_builder_ready?n?(E.Utils.runJs(this.el,"module"),e()):(E.liveStylingInstance.el=this.el,h&&clearTimeout(h),h=setTimeout(()=>{h=null,E.Utils.runJs(this.el,"module"),e()},s)):e()}).catch(e=>{console.log(e,this)})},previewReload(c,h,u){return new Promise((t,e)=>{if(h&&u&&E.activeModel){const i=h.length;if(i===k)h.innerHTML=u;else for(let e=0;e<i;++e)h[e].innerHTML=u;void t()}else{g&&!0===E.is_builder_ready&&g.abort();const s=O.createElement("span"),l=e=>{this.createEl(e),!0!==p&&!0===E.is_builder_ready&&(E.liveStylingInstance.el=this.el,E.Utils.runJs(this.el,"module",!0)),s.remove(),t()},o=this.get("mod_name"),a=c.unsetKey,r=(T.trigger("tbDisableInline"),delete c.unsetKey,delete c.element_id,(c=E.Helper.clear(c))["module_"+o+"_slug"]=1,c=JSON.stringify(c),T.hash(c)),n=!a&&_.get(r);if(n)l(n.html.replaceAll(n.id,this.id));else{s.className="tb_preview_component tf_lazy",this.el.prepend(s),E.is_ajax_call=!0,g=new AbortController;const d={action:"tb_load_module_partial",element_id:this.id,tb_module_slug:o,tb_module_data:c};E.LocalFetch(d,"text",{signal:g.signal}).then(e=>{_.set(r,{html:e,id:this.id}),l(e),E.is_ajax_call=g=null}).catch(()=>{this.el.classList.remove("tb_preview_loading"),e()})}}}).catch(e=>{console.log(e,this)})}},o=(Object.assign(E.Base.prototype,e),Object.assign(E.Module.prototype,i),async(e,t,i,s)=>{if(t>=e.length)return T.trigger("tb_css_visual_modules_load"),1;{const l=e.slice(t,t+i);await((s,l)=>new Promise((e,t)=>{const i={action:"tb_render_element",batch:JSON.stringify(s)};l&&(i.tmpGS=JSON.stringify(l)),E.LocalFetch(i).then(t=>{const i=[];for(let e in t)"tb_module_styles"!==e&&"gs"!==e&&E.Registry.trigger(e,"create",t[e]);if(t.tb_module_styles){const s=t.tb_module_styles;for(let e in s)s[e].s&&i.push(T.loadCss(s[e].s,e,s[e].v))}!0===E.is_builder_ready?Promise.all(i).finally(e):e()}).catch(e=>{console.log(e),t()})}))(l,s),o(e,t+=i,i)}}),l=(E.bootstrap=async(e,t)=>{const a=[];let r=p=!0;e||(r=!1,(()=>{if(!E.Builder.get()){const i=O.tfClass("themify_builder_content"),s=E.Helper.correctBuilderData(themifyBuilder.builder_data),l=[];for(let e=0,t=i.length;e<t;++e)i[e].classList.add("not_editable_builder");for(let e=0,t=s.length;e<t;++e)s[e]&&0<Object.keys(s[e]).length&&l.push(s[e]);new E.Builder(O.tfClass("themify_builder_content-"+themifyBuilder.post_ID)[0],l,themifyBuilder.custom_css)}})(),e=E.Registry.items.keys());for(let o of e){let e=E.Registry.get(o),t=e.type,i=e.fields,s=e.get("styling"),l="row"===t||"subrow"===t?e.get("sizes"):null;if("module"===t&&themifyBuilder.modules[i.mod_name]===k)e.getDisabledTpl();else{if(s&&0<Object.keys(s).length||l&&0<Object.keys(l).length)!0===r&&E.setCss([i],"module"===t?i.mod_name:t);else if("module"!==t)continue;if("module"===t&&"tile"!==i.mod_name&&i.mod_settings.__dc__===k&&"ajax"!==e.getPreviewType()){const n="accordion"===i.mod_name||"box"===i.mod_name||"feature"===i.mod_name||"tab"===i.mod_name||"text"===i.mod_name||"plain-text"===i.mod_name||"pointers"===i.mod_name||"pro-image"===i.mod_name||"countdown"===i.mod_name||"button"===i.mod_name||"pro-slider"===i.mod_name||"timeline"===i.mod_name;e.trigger("live",i.mod_settings,n,o)}else{if("column"===t)delete i.modules;else if("row"===t||"module"===t||"subrow"===t){if("row"===t&&"tb-page-break"===s.custom_css_row)continue;delete i.cols}i.elType=t,a.push(i)}}}return e=null,await o(a,0,360,t),p=!1,1},E.render=()=>{(async()=>{try{await E.FormTemplates.init()}catch(e){}const t="tb_visual_templates",i=T.hash(T.v+Object.keys(themifyBuilder.modules)+(themifyBuilder.cache_data||""));let s,l="";if(!themifyBuilder.debug)try{let e=localStorage.getItem(t);e&&(e=JSON.parse(e))?.h===i&&(s=e.val)}catch(e){}if(!s){s=await E.LocalFetch({action:"tb_load_visual_templates"});try{T.requestIdleCallback(()=>{localStorage.setItem(t,JSON.stringify({val:s,h:i}))},-1,3e3)}catch(e){}}for(let e in s)l+=s[e];O.body.insertAdjacentHTML("beforeend",l)})().then(()=>{E.bootstrap().then(()=>{ThemifyStyles.init(E.FormTemplates.getItem(),E.breakpointsReverse,E.Builder.get().id,themifyBuilder.gutters),E.jsModuleLoaded().then(()=>{E.setCss(E.Builder.get().toJSON()),T.trigger("themify_builder_ready"),B.Themify.trigger("themify_builder_ready"),E.Utils.runJs(),E.liveStylingInstance=new l,E.Registry.trigger(E.Builder.get(),"tb_init"),E.is_builder_ready=!0,setTimeout(()=>{T.fonts(),E.EdgeDrag.init(),(()=>{const t=B.document.tfClass("tb_middle_bar"),i=function(e){if(1===e.which){e.stopPropagation();let l=e.clientX,t,o=B.document.tfId("tb_iframe"),a="tb_right_bar"===this.id?"right":"left",r=tbLocalScript.breakpoints,n=E.ToolBar.el.offsetWidth,d=o.offsetWidth,c=B.document.tfClass("tb_vertical_change_tooltip")[0],i=B.document.tfClass("tb_vertical_bars")[0];o.style.transition="none",c?.remove(),(c=O.createElement("div")).className="tb_vertical_change_tooltip",this.appendChild(c),i.className+=" tb_resizing_start",o.classList.add("tb_resizing_start");const s=e=>{O.body.classList.add("tb_start_animate","tb_start_change_mode")},h=s=>{s.stopPropagation(),t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{let e=s.clientX-l,t=void(e*=2,"left"===a&&(e=-e)),i=d+e<320?320:d+e;i<=r.mobile?t="mobile":i<=r.tablet[1]?t="tablet":i<=r.tablet_landscape[1]?t="tablet_landscape":(t="desktop",i>n-17&&(i=n)),c.textContent=o.style.width=parseInt(i)+"px",E.activeBreakPoint!==t&&E.ToolBar.switchToBreakpoint(i)})},u=function(e){e.stopPropagation(),t&&cancelAnimationFrame(t),this.tfOff("lostpointercapture pointerup",u,{once:!0,passive:!0}).tfOff("pointermove",s,{once:!0,passive:!0}).tfOff("pointermove",h,{passive:!0}),c.remove(),o.style.transition="",o.classList.remove("tb_resizing_start"),i.classList.remove("tb_resizing_start"),O.body.classList.remove("tb_start_animate","tb_start_change_mode"),E.Utils._onResize(!0),i=c=d=r=a=l=n=t=o=null};this.tfOn("lostpointercapture pointerup",u,{once:!0,passive:!0}).tfOn("pointermove",s,{once:!0,passive:!0}).tfOn("pointermove",h,{passive:!0}),this.setPointerCapture(e.pointerId)}};for(let e=t.length-1;-1<e;--e)t[e].tfOn("pointerdown",i,{passive:!0})})()},1500)})})})},E.setCss=(e,t,l)=>{const o=E.GS.createCss(e,t,k),i=[];for(let s in o)if("fonts"===s||"cf_fonts"===s)for(let t in o[s]){let e=t;0<o[s][t].length&&(e+=":"+o[s][t].join(",")),i.push(e)}else if("gs"===s){let l=o[s];for(let s in l){let t=ThemifyStyles.getSheet(s,!0),i=t.cssRules;for(let e in l[s])!1===E.Utils.findCssRule(i,e)&&t.insertRule(e+"{"+l[s][e].join("")+";}",i.length)}}else if("bg"!==s){let t=ThemifyStyles.getSheet(s,l),i=t.cssRules;for(let e in o[s])!1===E.Utils.findCssRule(i,e)&&t.insertRule(e+"{"+o[s][e].join("")+";}",i.length)}return ThemifyConstructor.font_select.loadGoogleFonts(i.join("|")),o},T.on("builderiframeloaded",()=>{T.w=s.innerWidth,T.h=s.innerHeight,setTimeout(()=>{T.animateCss()},3e3),B.api=E,s._||(s._=B._),s.wp=B.wp||{},s.Backbone||(s.Backbone=B.Backbone),s.wp.Backbone||(s.wp.Backbone=B.wp.Backbone),s.wp.template||(s.wp.template=B.wp.template),s.wp.shortcode||(s.wp.shortcode=B.wp.shortcode),s.wp.media||(s.wp.media=B.wp.media),s.MediaElementPlayer||(s.MediaElementPlayer=B.MediaElementPlayer),jQuery.fn.mediaelementplayer||(jQuery.fn.mediaelementplayer=B.jQuery(s.top.document).mediaelementplayer),s.wp.mediaelement||(s.wp.mediaelement=B.wp.mediaelement),s.tinyMCE||(s.tinyMCE=B.tinyMCE,s.tinymce=B.tinymce,s.tinyMCEPreInit=B.tinyMCEPreInit,s.switchEditors=B.switchEditors),s.wpApiSettings||(s.wpApiSettings=B.wpApiSettings),E.render(),O.tfOn("submit",e=>{e.preventDefault()}).tfOn("click",e=>{const t=e.target,i=t.closest("a");!i||"_blank"===i.target||"javascript:;"===i.href||"#"!==i.href&&i.href&&i.href.replace(new URL(i.href).hash,"")===s.top.location.href.replace(location.hash,"")||e.preventDefault()})},!0).on("tb_undo_add undo",e=>{"string"==typeof e&&"move"!==e&&"delete"!==e&&"duplicate"!==e&&"paste"!==e&&"import"!==e&&"saveLightbox"!==e&&"inline"!==e||T.trigger("tb_toc")}),function(){this.context=null,this.el=null,this.module_rules={},this.rulesCache={},this.currentStyleObj={}});l.prototype.init=function(e,t,i,s){this.context=E.LightBox.el,this.model=i||E.activeModel,this.bp=s||E.activeBreakPoint,this.group=this.model.get("mod_name");let l,o=this.model.id;l=!0===t&&null!==E.GS.previousId?(o=E.GS.previousId,E.Registry.get(o).get("mod_name")):this.group,this.prefix=ThemifyStyles.getBaseSelector(l,o),this.el=t?E.Builder.get().el.querySelector(this.prefix):this.model.el,this.currentStyleObj={},this.rulesCache[this.bp]===k&&(this.rulesCache[this.bp]={}),this.currentSheet=ThemifyStyles.getSheet(this.bp,t),!0!==e&&("column"!==this.model.type&&"subrow"!==this.model.type&&this.bindAnimation(),this.bindTabsSwitch(),this.initModChange())},l.prototype.setLiveStyle=function(e,t,s){s?"string"==typeof s&&(s=[s]):s=[""],s=ThemifyStyles.getNestedSelector(s);let l="";const i=this.currentSheet.cssRules;for(let t=0,i=s.length;t<i;++t){let e="h"!==this.styleTabId||s[t].endsWith(":after")||s[t].endsWith(":before");!1!==e||s[t].includes(":hover")||(s[t]+=":hover"),l+=this.prefix+s[t],!1===e&&(l+=","+this.prefix+s[t].replace(":hover",".tb_visual_hover")),t!==i-1&&(l+=",")}if(!0===this.isChanged){let i;if("h"===this.styleTabId){const n=l.split(","),d=E.Builder.get().el;for(let t=n.length-1;-1<t;--t)if(!n[t].includes("tb_visual_hover"))for(let e=(i=d.querySelectorAll(n[t].split(":hover")[0])).length-1;-1<e;--e)i[e].classList.add("tb_visual_hover")}else{this.el.classList.remove("tb_visual_hover");for(let e=(i=this.el.tfClass("tb_visual_hover")).length-1;-1<e;--e)i[e].classList.remove("tb_visual_hover")}}l=l.replace(/\s{2,}/g," ").replace(/\s*>\s*/g,">").replace(/\,\s/g,",");const o=T.hash(l),a=t;let r=this.rulesCache[this.bp][o]!==k?this.rulesCache[this.bp][o]:E.Utils.findCssRule(i,l);if(!1===t&&(t=""),!1!==r&&i[r]){const c=""!==t&&t.includes("!important")?"important":"";c&&(t=t.replace("!important","")),i[r].style.setProperty(e,t,c)}else{if(""===t)return;r=i.length,this.currentSheet.insertRule(l+"{"+e+":"+t+";}",r)}this.rulesCache[this.bp][o]=r,T.trigger("tb_"+this.model.type+"_styling",[this.group,e,t,a,this.el])},l.prototype.initModChange=function(e){!0===e?(T.off("themify_builder_change_mode",this.modChange),this.modChange=null):(this.modChange||(this.modChange=(e,t)=>{this.setMode(t,null!==E.GS.activeGS)}),T.on("themify_builder_change_mode",this.modChange))},l.prototype.setMode=function(e,t){this.bp=e,this.rulesCache[e]===k&&(this.rulesCache[e]={}),this.currentSheet=ThemifyStyles.getSheet(e,t)},l.prototype.reset=function(){this.rulesCache={};const l=E.breakpointsReverse;for(let s=l.length-1;-1<s;--s){let t=ThemifyStyles.getSheet(l[s]),i=t.cssRules;for(let e=i.length-1;-1<e;--e)t.deleteRule(e);for(let e=(t=ThemifyStyles.getSheet(l[s],!0)).cssRules.length-1;-1<e;--e)t.deleteRule(e)}},l.prototype.clear=function(){const e=this.el,t=(e&&e.classList.remove("animated","hover-wow","tb_visual_hover"),this.module_rules={},this.styleTab=this.styleTabId=this.currentField=this.isChanged=null,e.tfClass("tb_visual_hover"));for(let e=t.length-1;-1<e;--e)t[e].classList.remove("tb_visual_hover");this.bindAnimation(!0),this.bindTabsSwitch(!0),this.initModChange(!0),this.el=this.currentStyleObj=this.currentSheet=this.bp=this.model=this.context=null},l.prototype.addOrRemoveFrame=function(a,r){if("module"!==this.model.type){let e="subrow"===this.model.type?this.el.querySelector(":scope>.module_subrow"):this.el,t="string"==typeof a,s=t?a:a.closest(".tb_tab").id.split("_").pop(),i,l=e.querySelector(":scope>.tb_row_frame_wrap"),o=(l||((l=O.createElement("div")).className="tb_row_frame_wrap tf_overflow tf_abs",e.prepend(l)),ThemifyBuilderModuleJs.addonLoad(e,"fr",!1),l.tfClass("tb_row_frame_"+s)[0]);if(k===r){r={},i=this.getValue(s+"-frame_type").selector;const d=["custom","location","width","height","width_unit","height_unit","repeat","type","layout","color","sh_x","sh_y","sh_b","sh_c","ani_dur","ani_rev"];for(let i=0,e=d.length;i<e;++i){let e=E.LightBox.el.querySelector("#"+s+"-frame_"+d[i]),t;if("type"===d[i])t=e.querySelector("input:checked").value;else if("ani_rev"===d[i])t=e.querySelector("input").value;else if("layout"===d[i])t=e.tfClass("selected")[0].id;else if("color"===d[i]||"sh_c"===d[i]){if(""===(t=E.Helper.getColor(e)))continue}else t=e.value;r[d[i]]=t}}const n=0<parseFloat(r.ani_dur);if(r.type===s+"-presets"||r.type===s+"-custom"){if(r.type===s+"-presets"&&(!r.layout||"none"===r.layout)||r.type===s+"-custom"&&!r.custom)return void("desktop"===this.bp?t||this.setLiveStyle("background-image","",i):"none"===r.layout&&this.setLiveStyle("background-image","none",i));o?(o.classList.remove("in_bellow","in_front"),r.location!==k&&o.classList.add(r.location)):((o=O.createElement("div")).className="tf_abs tf_overflow tf_w tb_row_frame tb_row_frame_"+s,r.location!==k&&(o.className+=" "+r.location),l.appendChild(o)),this.setLiveStyle("transform",r.type!==s+"-presets"||"bottom"!==s&&"right"!==s?"":"rotate(180deg)",i)}if(!t){if(r.type===s+"-presets"){const c="left"===s||"right"===s?r.layout+"-l":r.layout,h=T.hash(c);if(!ThemifyStyles.fields.frameCache[h]){const u=O.tfId("tmpl-frame_"+c);null!==u&&(ThemifyStyles.fields.frameCache[h]=u.textContent.trim())}if(ThemifyStyles.fields.frameCache[h]){let e=ThemifyStyles.fields.frameCache[h];r.color&&(e=e.replace(/\#D3D3D3/gi,r.color)),this.setLiveStyle("background-image",'url("data:image/svg+xml;utf8,'+encodeURIComponent(e)+'")',i)}}else this.setLiveStyle("background-image",'url("'+r.custom+'")',i);if(n&&("left"===s||"right"===s?(r.height=200,r.height_unit="%"):(r.width=200,r.width_unit="%"),r.repeat=""===r.repeat?2:2*parseInt(r.repeat)),this.setLiveStyle("width",r.width?r.width+r.width_unit:"",i),this.setLiveStyle("height",r.height?r.height+r.height_unit:"",i),r.repeat){let e=100/r.repeat;"left"===s||"right"===s?this.setLiveStyle("background-size","100% "+e+"%",i):this.setLiveStyle("background-size",e+"% 100%",i)}else this.setLiveStyle("background-size","",i);if(n?(this.setLiveStyle("animation-name","tb_frame_"+("left"===s||"right"===s?"vertical":"horizontal"),i),this.setLiveStyle("animation-iteration-count","infinite",i),this.setLiveStyle("animation-timing-function","linear",i),this.setLiveStyle("animation-duration",r.ani_dur+"s",i),this.setLiveStyle("animation-direction","1"===r.ani_rev?"reverse":"",i)):this.setLiveStyle("animation-name","",i),r.sh_b&&r.sh_c){const g=[r.sh_x?r.sh_x+"px":0,r.sh_y?r.sh_y+"px":0,r.sh_b+"px",r.sh_c];this.setLiveStyle("filter","drop-shadow("+g.join(" ")+")",i)}else this.setLiveStyle("filter","",i)}}},l.prototype.overlayType=function(e){if("module"!==this.model.type){const t="color"===e||"hover_color"===e,i=t?"tfminicolors-input":"themify-gradient-type",s=this.styleTab.tfClass("tb_group_element_"+e)[0].tfClass(i)[0];if(t){let e=s.value;e=e&&E.Helper.getColor(s),T.triggerEvent(s,"themify_builder_color_picker_change",{val:e})}else T.triggerEvent(s,"change")}},l.prototype.addOrRemoveComponentOverlay=function(t,i,s){if("module"!==this.model.type){let e=this.getComponentBgOverlay(this.model.type);const l=this.getValue(i),o=l.selector;this.el.classList.toggle("tb_visual_hover","h"===this.styleTabId),""===s&&i?(this.setLiveStyle("background-image","",o),this.setLiveStyle("background-color","",o)):(e||((e=O.createElement("div")).className="builder_row_cover tf_abs",("row"===this.model.type?this.el.querySelector(":scope > .row_inner"):this.el.tfClass("tb_"+this.model.type+"_action")[0]).before(e)),ThemifyBuilderModuleJs.addonLoad(e,"cover",!1),l&&("color"===t?this.setLiveStyle("background-image","none",o):this.setLiveStyle("background-color",!1,o),this.setLiveStyle(l.prop,s,o)))}},l.prototype.outline=function(e){const t=this.getValue(e.id),i=e.closest(".tb_multi_fields"),s=E.Helper.getColor(i.tfClass("outline_color")[0]),l=parseFloat(i.tfClass("outline_width")[0].value),o=i.tfClass("outline_style")[0].value;"none"===o?this.setLiveStyle("outline","none",t):isNaN(l)||""===s||this.setLiveStyle("outline",l+"px "+o+" "+s,t)},l.prototype.bindMultiFields=function(e,c){if(c=this.getValue(e.id)){let i=e.closest(".tb_seperate_items"),s=c.prop.split("-"),l=s[3]!==k,a=!1===l&&"border"===s[0],o=i.hasAttribute("data-checked"),r=e=>{let t="";if(!0===a){const i=e.closest("li"),s=parseFloat(i.tfClass("border_width")[0].value.trim()),l=i.tfClass("border_style")[0].value,o=E.Helper.getColor(i.tfClass("tfminicolors-input")[0]);"none"===l?t=l:isNaN(s)||""===o||(t=s+"px "+l+" "+o)}else""!==(t=e.value.trim())&&(t=parseFloat(t),isNaN(t)?t="":t+=e.closest(".tb_input").querySelector("#"+e.id+"_unit").value);return t},n=(t,e)=>{if(!1===a&&!1===l){if("row"===this.model.type&&tbLocalScript.fullwidth_support!==k&&(o&&("padding"===e||"margin"===e)||"padding-left"===e||"padding-right"===e||"margin-left"===e||"margin-right"===e)){const i=e.split("-"),s=this.bp+"-"+i[0];if(o)t=t+","+t;else{let e=this.el.dataset[s];e=e?e.split(","):[],"left"===i[1]?e[0]=t:e[1]=t,t=e.join(",")}this.el.setAttribute("data-"+s,t),T.reRun(this.el,!0)}(o&&"padding"===e||0===e.indexOf("padding"))&&setTimeout(()=>{T.trigger("tfsmartresize",{w:T.w,h:T.h})},600)}},d=!0===o?r(e):null;s[0];for(let e=i.tfClass("tb_multi_field"),t=e.length-1;-1<t;--t)!1===o&&(d=r(e[t])),s=this.getValue(e[t].id).prop,this.setLiveStyle(s,d,c.selector),n(d,s)}},l.prototype.bindRowWidthHeight=function(e,t,i){const s=(i=i||this.el).classList;if("row_height"===e)s.toggle("fullheight","fullheight"===t);else if(s.remove("fullwidth","fullwidth_row_container"),"fullwidth"===t)s.add("fullwidth_row_container"),T.reRun(i,!0);else if("fullwidth-content"===t)s.add("fullwidth"),T.reRun(i,!0);else{const l=i.style;l.marginLeft=l.marginRight=l.paddingLeft=l.paddingRight=l.width=""}T.trigger("tfsmartresize",{w:T.w,h:T.h})},l.prototype.bindAnimation=function(e){if(!0===e)this.animateEvent&&(this.context.tfOff("change",this.animateEvent,{passive:!0}),this.animateEvent=null);else{if(!this.animateEvent){const h=this;this.animateEvent=e=>{const t=e.target.id;if("animation_effect"===t||"animation_effect_delay"===t||"animation_effect_repeat"===t||"hover_animation_effect"===t){const i="hover_animation_effect"===t,s=i?"hover_animation_effect":"animation_effect",l=(i?e.target:h.context.querySelector("#animation_effect")).value,o=(h.currentStyleObj[s]!==k?h.currentStyleObj:ThemifyConstructor.values)[s],a=h.el.classList,r=h.el.style;if(o&&(a.remove(o,"wow"),r.setProperty("animation-name",""),r.setProperty("animation-delay",""),r.setProperty("animation-iteration-count","")),a.remove("animated","tb_hover_animate"),h.currentStyleObj[s]=l){const n=i?"":parseFloat(h.context.querySelector("#animation_effect_delay").value),d=i?"":parseInt(h.context.querySelector("#animation_effect_repeat").value),c=tbLocalScript.is_animation;h.el.dataset.tfAnimation=l,r.setProperty("animation-delay",0<n&&!isNaN(n)?n+"s":""),r.setProperty("animation-iteration-count",0<d&&!isNaN(d)?d:""),a.add("wow"),tbLocalScript.is_animation=!0,ThemifyBuilderModuleJs.wow(h.el,!1),tbLocalScript.is_animation=c}}}}this.context.tfOn("change",this.animateEvent,{passive:!0})}},l.prototype.getStylingVal=function(e){return this.currentStyleObj[e]!==k?this.currentStyleObj[e]:""},l.prototype.setStylingVal=function(e,t){this.currentStyleObj[e]=t},l.prototype.bindBackgroundMode=function(e,t){const i={repeat:"repeat","repeat-x":"repeat-x","repeat-y":"repeat-y","repeat-none":"no-repeat","no-repeat":"no-repeat",fullcover:"cover","best-fit-image":"contain","builder-parallax-scrolling":"cover","builder-zoom-scrolling":"100%","builder-zooming":"100%"},s=this.el;if(i[e]!==k){const l=ThemifyStyles.breakpoint,o=(ThemifyStyles.breakpoint=this.bp,{"background-repeat":"","background-size":"","background-position":"","background-attachment":""}),a=this.model.get("mod_name"),r=(e,t)=>{let i;return i=E.activeModel&&E.activeModel.id===this.model.id?(i=this.context.querySelector(t))&&i.value.trim():ThemifyStyles.getStyleVal(e,this.model.get("styling"))},n=ThemifyStyles.getStyleOptions(a)[t],d=this.getValue(t),c=(n||d).selector,h=t.endsWith("_inner")?"_inner":"",u=r("background_type","#background_type input:checked"),g=!(h||u&&"image"!==u||r("resp_no_bg","#resp_no_bg input:checked"))&&n?r(n.origId,"#"+n.origId):null;if(g&&""===g)e=null;else if(n){const p="background_position"+h,_=r(p,"#"+p),m={},f=("desktop"===this.bp?(m[t]=e,m[p]=_):m["breakpoint_"+this.bp]={[t]:e,[p]:_},ThemifyStyles.fields[n.type].call(ThemifyStyles,t,a,n,{[n.origId]:!0},this.id,m));if(f){const b=f.split("#@#");for(let i=b.length-1;-1<i;--i)if(b[i]){let[e,t]=b[i].split(":");o[e]=t}}"desktop"!==E.activeBreakPoint&&(""===o["background-attachment"]&&(o["background-attachment"]=r("background_attachment"+h,"#background_attachment"+h)||""),""===o["background-position"])&&(o["background-position"]=r(p,"#"+p)||"")}else e.includes("repeat")?(o["background-repeat"]=i[e],o["background-size"]="auto"):(o["background-size"]=i[e],o["background-repeat"]="no-repeat");for(let e=["parallax","zooming","zoom"],t=e.length-1;-1<t;--t)s.getAttribute("data-"+e[t]+"-bg")===this.bp&&s.removeAttribute("data-"+e[t]+"-bg");if(s.classList.remove("builder-parallax-scrolling","builder-zooming","builder-zoom-scrolling","active-zooming"),s.style.backgroundSize=s.style.backgroundPosition="",ThemifyStyles.breakpoint=l,"module"!==this.model.type||"builder-parallax-scrolling"!==e&&"builder-zooming"!==e&&"builder-zoom-scrolling"!==e&&"best-fit-image"!==e){for(let e in o)this.setLiveStyle(e,o[e],c);"builder-zoom-scrolling"!==e&&"builder-zooming"!==e&&"builder-parallax-scrolling"!==e||(s.setAttribute("data-"+e.split("-")[1]+"-bg",this.bp),T.reRun(s,!0))}}},l.prototype.position=function(t,e){if(t&&0<t.length){const i=this.getValue(e);i&&requestAnimationFrame(()=>{const e=t.split(",");this.setLiveStyle(i.prop,e[0]+"% "+e[1]+"%",i.selector),this.el.classList.contains("builder-parallax-scrolling")&&(this.el.style.setProperty("background-position-y",""),T.reRun(this.el,!0))})}},l.prototype.bindBackgroundSlider=function(e){if("module"!==this.model.type){const i=this.context.querySelector("#"+e.id).value.trim();if(this.removeBgSlider(),i){this.cache===k&&(this.cache={});const s={shortcode:encodeURIComponent(i),mode:this.context.querySelector("#background_slider_mode").value,speed:this.context.querySelector("#background_slider_speed").value,size:this.context.querySelector("#background_slider_size").value},l=e=>{const t=O.createElement("template"),i=(t.innerHTML=e,this.getComponentBgOverlay(this.model.type)),s=t.content;i?i.after(s):this.el.prepend(s),T.reRun(this.el,!0)};let t="";for(let e in s)t+=T.hash(e+s[e]);if(this.cache[t]!==k)l(this.cache[t]);else{s.type=this.model.type;const o={action:"tb_slider_live_styling",tb_background_slider_data:JSON.stringify(s)};E.LocalFetch(o,"text").then(e=>{e.length<10||(this.cache[t]=e,l(e))})}}}},l.prototype.videoOptions=function(l,o){if("module"!==this.model.type){let e=this.el.tfClass("big-video-wrap")[0],t="",i=!0===l.checked,s="";e!==k&&(e.classList.contains("themify_ytb_wrapper")?(t=this.el,s="ytb"):e.classList.contains("themify-video-vmieo")?(t=$f(e.children("iframe")[0]))&&(s="vimeo"):(t=this.el.dataset.plugin_ThemifyBgVideo,s="local"),"mute"===o?i?("ytb"===s?t.ThemifyYTBMute():"vimeo"===s?t.api("setVolume",0):"local"===s&&t.muted(!0),this.el.dataset.mutevideo="mute"):("ytb"===s?t.ThemifyYTBUnmute():"vimeo"===s?t.api("setVolume",1):"local"===s&&t.muted(!1),this.el.removeAttribute("data-mutevideo")):"unloop"===o&&(i?("vimeo"===s?t.api("setLoop",0):"local"===s&&t.loop(!1),this.el.removeAttribute("data-unloopvideo")):("vimeo"===s?t.api("setLoop",1):"local"===s&&t.loop(!0),this.el.dataset.unloopvideo="loop")))}},l.prototype.bindBackgroundTypeRadio=function(e){let t="tb_uploader_input";"module"!==this.model.type&&("slider"!==e?"n"===this.styleTabId&&this.removeBgSlider():t="tb_shortcode_input","video"!==e)&&"n"===this.styleTabId&&this.removeBgVideo(),"gradient"!==e?this.setLiveStyle("background-image","none"):t="themify-gradient-type";const i=this.styleTab.querySelector(".tb_group_element_"+e+":not(.background_color)");if(i&&(T.triggerEvent(i.tfClass(t)[0],"change"),"image"===e)&&"module"===this.model.type){const s=i.tfClass("tfminicolors-input")[0];s&&T.triggerEvent(s,"themify_builder_color_picker_change",{val:s.value})}},l.prototype.bindFontColorType=function(i,s,l){if("radio"===l){const e=i.includes("_solid"),t=!0===e?i.replace(/_solid$/gi,""):i.replace(/_gradient$/gi,"-gradient-type"),o=B.document.tfId(t);if(!0===e){let e=E.Helper.getColor(o);e!==k&&""!==e||(e=""),T.triggerEvent(o,"themify_builder_color_picker_change",{val:e})}else T.triggerEvent(o,"change")}else{let e=l,t=this.getValue(s).selector;"color"===e?i===k||""===i?(this.setLiveStyle("-webkit-background-clip",i="",t),this.setLiveStyle("background-clip","",t),this.setLiveStyle("background-image","",t)):(this.setLiveStyle("-webkit-background-clip","",t),this.setLiveStyle("background-clip","border-box",t),this.setLiveStyle("background-image","none",t)):""!==i&&(e="background-image",this.setLiveStyle("color","transparent",t),this.setLiveStyle("-webkit-background-clip","text",t),this.setLiveStyle("background-clip","text",t)),""===i&&"color"!==e||this.setLiveStyle(e,i,t)}},l.prototype.shadow=function(e,t,i){const a=this.getValue(t);if(a){let i=e.closest(".tb_seperate_items").tfClass("tb_shadow_field"),s="",l=!0,o="";for(let t=0,e=i.length;t<e;++t)if(i[t].classList.contains("tb_checkbox"))s=i[t].checked?"inset ":"";else{let e=i[t].value.trim();"color"===ThemifyConstructor.styles[i[t].id].type?e=E.Helper.getColor(i[t]):""===e?e=0:(l=!1,e+=i[t].closest(".tb_input").querySelector("#"+i[t].id+"_unit").value),o+=e+" "}o=!0===l?"":s+o,this.setLiveStyle(a.prop,o,a.selector)}},l.prototype.filters=function(e,t){let i=e.closest(".tb_filters_fields").tfClass("tb_filters_field"),s="",l;for(let t=0,e=i.length;t<e;++t){let e=i[t].value.trim();""!==e&&(e+="hue-rotate"===(l=this.getValue(i[t].id)).prop?"deg":i[t].closest(".tb_seperate_items").querySelector("#"+i[t].id+"_unit").textContent,e=l.prop+"("+e+")",s+=e+" ")}l=this.getValue(t),this.setLiveStyle("filter",s,l.selector)},l.prototype.transform=function(e,t){let l="";const o=e.closest(".tb_transform_fields"),i=this.getValue(t),a=t.split("_")[0];for(let e=["scale","translate","rotate","skew"],t=0;t<e.length;++t){let s=e[t];switch(s){case"scale":case"translate":case"skew":let e=o.querySelector("#"+a+"_"+s+"_top").value.trim(),t=o.querySelector("#"+a+"_"+s+"_bottom").value.trim(),i;i="translate"===s?{x:o.querySelector("#"+a+"_"+s+"_top_unit").value,y:o.querySelector("#"+a+"_"+s+"_bottom_unit").value}:"skew"===s?"deg":"",""===e&&""===t||(""!==e&&o.querySelector("#"+a+"_"+s+"_opp_bottom .style_apply_oppositive").checked?l+=s+"("+e+("translate"===s?i.x:i)+") ":l+=""!==e&&""!==t?s+"("+e+("translate"===s?i.x:i)+","+t+("translate"===s?i.y:i)+") ":""!==e?s+"X("+e+("translate"===s?i.x:i)+") ":s+"Y("+t+("translate"===s?i.y:i)+") ");break;case"rotate":for(let t=["z","y","x"],i=t.length-1;-1<i;--i){let e=o.querySelector("#"+a+"_"+s+"_"+t[i]).value.trim();""!==e&&(l+=s+t[i].toUpperCase()+"("+e+"deg) ")}break}}this.setLiveStyle("transform",l.trim(),i.selector)},l.prototype.setData=function(e,t,i){const s=this.getValue(e);s&&(""===t&&(t=s.prop),this.setLiveStyle(t,i,s.selector))},l.prototype.bindEvents=function(e,C){if(!e.classList.contains("style_apply_all")){const w=this,L=t=>{if(this.currentField!==t.id||""===this.currentField){this.currentField="radio"!==t.type&&t.id,this.isChanged=!0,this.styleTab=null,this.styleTabId="n";let e=t.closest(".tb_tab");null===e?null===(e=t.closest(".tb_expanded_opttions"))&&(e=this.context.querySelector("#tb_options_styling")):this.styleTabId=e.id.split("_").pop(),this.styleTab=e}else this.isChanged=!1};let b,y=C.type,v=C.prop,S=C.id;b="color"===y?"themify_builder_color_picker_change":"gradient"===y?"themify_builder_gradient_change":"text"===y||"range"===y||"textarea"===y?"keyup":"change",e.tfOn(b,function(e){let t=this.classList,s,i="SELECT"===this.tagName,l=!i&&"radio"===this.type;if(L(this),s=(s=e.detail&&e.detail.val?e.detail.val:"frame"===y?this.id:this.value)!==k&&"undefined"!==s?s.trim():"",t.contains("outline_color")||t.contains("outline_width")||t.contains("outline_style"))w.outline(this,C);else if(t.contains("tb_transform_field"))w.transform(this,S);else if("color"===y&&t.contains("border_color")||!0==i&&t.contains("border_style")||"keyup"===b&&(t.contains("border_width")||t.contains("tb_multi_field")))w.bindMultiFields(this);else if("frame-custom"===v||"frame"===y||t.contains("tb_frame")||t.contains("toggle_switch")&&this.closest(".tb_field.tb_frame"))"module"!==w.model.type&&w.addOrRemoveFrame(this);else if(t.contains("tb_shadow_field"))w.shadow(this,S);else if(t.contains("tb_filters_field"))w.filters(this,S);else if("keyup"===b){if(""!==s&&"z-index"!==v)if("column-rule-width"===v){s+="px";const o=S.replace("_width","_style"),a=w.context.querySelector("#"+o);null!==a&&w.setData(o,"",a.value)}else{const r=w.context.querySelector("#"+S+"_unit");s+=null!==r&&r.value?r.value:"px"}w.setData(S,"",s)}else if(!0===C.isFontColor)w.bindFontColorType(s,S,y);else{if(!0==i)if("font-weight"===v){const n=this.getAttribute("data-selected"),d=w.styleTab.tfClass("tb_multi_fonts")[0];if(null!==n&&""!==n&&"default"!==n&&ThemifyConstructor.font_select.safe[n]===k&&ThemifyConstructor.font_select.loadGoogleFonts(n+":"+s),d){let e;!1===(e=s.includes("italic")?(s=parseInt(s.replace("italic","")).toString(),d.querySelector('[data-value="italic"]')):d.querySelector('[data-value="normal"]')).checked&&e.parentNode.click()}}else if("font_select"===y){if(""!==s&&"default"!==s&&ThemifyConstructor.font_select.safe[s]===k){let e=this.closest(".tb_tab").tfClass("font-weight-select")[0],t;t=s,e!==k?t+=":"+e.value:w.setLiveStyle("font-weight","",C.selector),ThemifyConstructor.font_select.loadGoogleFonts(t)}else"default"===s&&(s="");""!==s&&(s=ThemifyStyles.parseFontName(s))}else{if(t.contains("tb_unit"))return void T.triggerEvent(w.context.querySelector("#"+S.replace("_unit","")),"keyup");if("background-mode"===v)return void w.bindBackgroundMode(s,S);if("column-count"===v&&0==s)s="";else if(t.contains("tb_position_field")){const c=["top","right","bottom","left"],h=this.closest(".tb_input");for(let i=c.length-1;-1<i;--i){let t="";if("absolute"===s||"fixed"===s){let e="#"+C.id+"_"+c[i];t="auto",h.querySelector(e+"_auto input").checked||(t=h.querySelector(e).value.trim()+h.querySelector(e+"_unit").value.trim())}w.setLiveStyle(c[i],t,C.selector)}}else if("display"===v){if("none"===s)return!1;w.setLiveStyle("width","inline-block"===s?"auto":"100%",C.selector)}else if("vertical-align"===v&&""!==s){let e;e="top"===s?"flex-start":"middle"===s?"center":"flex-end",w.setLiveStyle("align-self",e,C.selector)}}else{if("gallery"===y&&"module"!==w.model.type)return void w.bindBackgroundSlider(C);if(!0==l){if(S=this.closest(".tb_lb_option").id,!1===this.checked&&(s=""),"imageGradient"===y||!0===C.is_background)return void w.bindBackgroundTypeRadio(s);if(!0===C.is_overlay)return void("module"!==w.model.type&&w.overlayType(s))}else if("color"===y||"gradient"===y){if("gradient"===y&&(S=this.dataset.id),!0===C.is_overlay)return void("module"!==w.model.type&&w.addOrRemoveComponentOverlay(y,S,s));if("color"===y){let e=null;"module"===w.model.type&&C.colorId!==k&&C.origId!==k?null!==(e=w.context.querySelector("#"+C.origId))&&"image"!==e.closest(".tb_input").querySelector("input:checked").value&&(e=null):"module"!==w.model.type&&"h"===w.styleTabId&&(e=w.styleTab.tfClass("tb_uploader_input")[0]),e&&""===e.value.trim()&&w.setLiveStyle("background-image",""!==s?"none":"",C.selector)}}else if("image"===y||"video"===y){if("video"===y)return 0<s.length?"module"!==w.model.type&&(w.el.dataset.tbfullwidthvideo=s,!w.el.dataset.mutevideo&&w.context.querySelector('#background_video_options [value="mute"]').checked?w.el.dataset.mutevideo="mute":w.el.removeAttribute("data-mutevideo"),T.reRun(w.el,!0)):w.removeBgVideo(),!1;{if(s)s="url("+s+")";else if(s="",C.colorId!==k&&"h"===w.styleTabId){const g=w.context.querySelector("#"+C.colorId);null!==g&&""!==g.value.trim()&&(s="none")}const u=w.styleTab.tfClass("tb_image_options");for(let e=u.length-1;-1<e;--e){let t=u[e].tfClass("tb_lb_option");for(let e=t.length-1;-1<e;--e)T.triggerEvent(t[e],"change")}}}else{if("position_box"===y)return void w.position(s,S);if("checkbox"===y){if(null!==this.closest("#background_video_options"))return void w.videoOptions(this,s);if(("height"===v||"width"===v)&&S.includes("_auto_"+v)){const p=C.origId;if(this.checked)w.setData(p,v,"auto");else{const _=w.styleTab.querySelector("#"+p).value.trim();""!==_?w.setData(p,v,_+w.styleTab.querySelector("#"+p+"_unit").value):w.setData(p,v,"")}return}if(!0===C.is_position){const m="#"+C.posId,f=this.closest(".tb_multi_fields");return s=this.checked?"auto":""===(s=f.querySelector(m).value.trim())||isNaN(s)?"":s+f.querySelector(m+"_unit").value,void w.setLiveStyle(C.prop,s,C.selector)}if("background-image"===v)return this.checked||(s=!1),void w.setLiveStyle(C.prop,s,C.selector)}}}w.setData(S,"",s)}},{passive:!0})}},l.prototype.getValue=function(e){return this.module_rules[e]!==k&&this.module_rules[e]},l.prototype.bindTabsSwitch=function(e){!0===e?this.tabsHover&&(T.off("tb_builder_tabsactive",this.tabsHover),this.tabsHover=null):(this.tabsHover||(this.tabsHover=(e,t)=>{if("styling"===ThemifyConstructor.clicked){let l;if("h"!==e.split("_").pop()){this.el.classList.remove("tb_visual_hover");for(let e=(l=this.el.tfClass("tb_visual_hover")).length-1;-1<e;--e)l[e].classList.remove("tb_visual_hover")}else{if("module"!==this.model.type){let e=t.previousElementSibling.tfClass("background_type")[0];e&&(e=e.querySelector("input:checked").value,t.classList.toggle("tb_disable_hover","image"!==e&&"gradient"!==e))}setTimeout(()=>{let s=[];for(let i=(l=t.tfClass("tb_lb_option")).length-1;-1<i;--i){let e=l[i].id,t=l[i].classList.contains("themify-gradient");if(!0===t&&(e=l[i].dataset.id),this.module_rules[e]!==k&&(t||null!==l[i].offsetParent)){this.module_rules[e].is_overlay!==k&&this.el.classList.add("tb_visual_hover");let i=Array.isArray(this.module_rules[e].selector)?this.module_rules[e].selector:[this.module_rules[e].selector];for(let t=i.length-1;-1<t;--t){let e=i[t].split(":hover")[0];s[e]=1}}}if(0<(s=Object.keys(s)).length)for(let t=s.length-1;-1<t;--t)for(let e=(l=O.querySelectorAll(this.prefix+s[t])).length-1;-1<e;--e)l[e].classList.add("tb_visual_hover")},10)}}}),T.on("tb_builder_tabsactive",this.tabsHover))},l.prototype.getComponentBgOverlay=function(e){const t="subrow"===(e=e||this.model.type)?this.el.querySelector(":scope>.module_subrow"):this.el;return t.querySelector(":scope>.builder_row_cover")},l.prototype.getComponentBgSlider=function(){const e=!0===this.model.isSubCol?"sub-col":"colum"===this.model.type?"col":this.model.type;return this.el.querySelectorAll(":scope>."+e+"-slider")},l.prototype.removeBgSlider=function(){let t=this.getComponentBgSlider();for(let e=t.length-1;-1<e;--e)t[e].remove();for(let e=(t=this.el.querySelectorAll(":scope>.tb_backstretch")).length-1;-1<e;--e)t[e].remove();this.el.style.position=this.el.style.background=this.el.style.zIndex=""},l.prototype.removeFrames=function(){const e=this.el.querySelector(":scope>.tb_row_frame_wrap");null!==e&&e.remove()},l.prototype.removeBgVideo=function(){this.el.removeAttribute("data-tbfullwidthvideo");const e=this.el.querySelector(":scope>.tb_fullwidth_video");null!==e&&e.remove()},E.EdgeDrag={_onDrag:null,_mouseMove:null,_timers:new Map,_coords:new Set,init(){const e=E.Builder.get().el,t=E.ToolBar.el.tfClass("padding_dragging_mode")[0],i=O.body.classList;null===this._onDrag&&(this._onDrag=e=>{this.drag(e)},this._mouseMove=e=>{if(!O.body.classList.contains("tb_start_animate")&&null===E.ActionBar.disable&&"tb_small_toolbar_root"!==e.target.id){const t=e.clientX,i=e.clientY;requestAnimationFrame(()=>{this.clearNegative(t,i)})}}),localStorage.getItem("tb_disable_padding_dragging")?(e.tfOff("pointerdown",this._onDrag,{passive:!0}).tfOn("pointermove",this._mouseMove,{passive:!0}),i.add("tb_disable_padding_dragging"),t.checked=!1):(e.tfOn("pointerdown",this._onDrag,{passive:!0}).tfOn("pointermove",this._mouseMove,{passive:!0}),i.remove("tb_disable_padding_dragging"),t.checked=!0)},addEdgesOptions(e){const t=e.closest(".tb_dragger");if(!t.tfClass("tb_dragger_lightbox")[0]){const l=t.classList.contains("tb_dragger_margin")?"margin":"padding",o=E.Registry.get(t.closest("[data-cid]").getAttribute("data-cid")),i=o.type,a="margin"==l&&("column"===i||"row"===i),s=["%","em","px"],r=a?["opposite"]:["all","opposite"],n=t.classList.contains("tb_dragger_top")||t.classList.contains("tb_dragger_bottom")?"s":"e",d=a?"margin-top_opp_top":"checkbox_#id#_apply_all",c="1"===this.getCurrentStyling(d,o,l),h=t.dataset.u||"px",u=O.createElement("div"),g=O.createElement("ul"),p=O.createElement("ul");u.className="tb_dragger_lightbox",p.className="tb_dragger_units",g.className="tb_dragger_types";for(let t=s.length-1;-1<t;--t){let e=O.createElement("li");e.textContent=s[t],s[t]===h&&(e.className="current"),p.appendChild(e)}for(let s=r.length-1;-1<s;--s){let e=O.createElement("li"),t=O.createElement("span"),i=!1;if(e.className="tb_apply tf_box tf_rel tf_block tb_apply_"+r[s],a||"opposite"!==r[s])i=c;else if(!c){let e="#id#_opp_";e+="s"==n?"top":"left",i="1"==this.getCurrentStyling(e,o,l)}i&&(e.className+=" current"),e.appendChild(t),g.appendChild(e)}u.append(p,g),t.tfClass("tb_dragger_options")[0].appendChild(u)}},openLightBox(l){if(l.hasAttribute("data-v")||""===l.getAttribute("data-v")){const e=l.closest("[data-cid]");if(e){const t=E.Registry.get(e.dataset.cid);t.edit("styling").then(e=>{const t=l.classList.contains("tb_dragger_padding")?"p":"m",i=ThemifyConstructor.label[t],s=e.tfClass("tb_style_toggle");for(let e=s.length-1;-1<e;--e)if(s[e].textContent===i){s[e].classList.contains("tb_closed")&&T.triggerEvent(s[e],T.click),setTimeout(()=>{s[e].closest(".tf_scrollbar").scrollTop=s[e].offsetTop},10);break}}).catch(e=>{})}}},addEdges(u){const i=u.el,s=u.get("mod_name");if(!(!0===u.isEmpty||"divider"===s||"row"===s&&i.classList.contains("tb-page-break"))){const l=["padding","margin"],g=["right","bottom","left","top"],o=u.type,p=[],_=g.length;for(let t=l.length-1;-1<t;--t){let a=O.createDocumentFragment(),r=l[t],n="module"===o&&"padding"===r?i.tfClass("module")[0]:i,d,c="margin"===r&&("column"===s||"row"===s),e,h;(n="subrow"===o&&"padding"===r?i.tfClass("module_subrow")[0]:n)&&(n=n.children,d=n.length-1),c?"1"==this.getCurrentStyling("margin-top_opp_top",u,r)&&(e=this.getCurrentStyling("margin-top",u,r),h=this.getCurrentStyling("margin-top_unit",u,r)||"px"):"1"==this.getCurrentStyling("checkbox_#id#_apply_all",u,r)&&(e=this.getCurrentStyling("#id#_top",u,r),h=this.getCurrentStyling("#id#_top_unit",u,r)||"px");for(let o=_-1;-1<o;--o)if("margin"!==r||"column"!==s&&"row"!==s||"right"!==g[o]&&"left"!==g[o]){let i,s,t=h,l=e;if(n)for(let e=d;-1<e;--e)if(n[e]&&n[e].classList.contains("tb_dragger_"+g[o])&&n[e].classList.contains("tb_dragger_"+r)){i=n[e];break}if(i)s=i.tfClass("tb_dragger_value")[0];else{i=O.createElement("div"),s=O.createElement("span"),i.className="tb_dragger tf_opacity tf_box tf_abs_t tf_h tb_dragger_"+g[o]+" tb_dragger_"+r,s.className="tb_dragger_value";let e=O.createElement("div"),t=O.createElement("span");t.className="tb_dragger_arrow tf_inline_b tf_vmiddle tf_box",e.className="tb_dragger_options tf_abs_c",e.tabIndex=-1,e.append(s,t),i.appendChild(e),a.appendChild(i)}if(!t){let e=c?"#id#-"+g[o]:"#id#_"+g[o];l=this.getCurrentStyling(e,u,r),t=this.getCurrentStyling(e+"_unit",u,r)||"px"}if(l!==k&&null!==l&&""!==l){let e=i.dataset.u||"px";if(e===t&&i.dataset.v==l||(i.dataset.u=t,i.dataset.v=l,s.textContent=l+t,"padding"!==r&&p.push(i)),"margin"===r)if(i.classList.contains("tf_dragger_negative"))0<=l&&i.classList.remove("tf_dragger_negative");else{let e=this._timers.get(i);e&&(clearTimeout(e),this._timers.delete(i),e=null),l<0&&(e=setTimeout(()=>{i.isConnected&&!i.style.willChange&&!O.body.classList.contains("tb_dragger_options_open")&&i.matches(":hover")&&(this._coords.add(i),i.classList.add("tf_dragger_negative")),this._timers.delete(i),e=null},1200),this._timers.set(i,e))}}}if("margin"===r||"module"!==o&&"subrow"!==o)i.appendChild(a);else{const m="subrow"===o?"module_subrow":"module",f=i.tfClass(m)[0];f?.appendChild(a)}if("padding"!==r)for(let e=p.length-1;-1<e;--e)this.setValueByType(p[e],s,p[e].dataset.v,p[e].dataset.u);if("row"!==o){let e="module"===o||"subrow"===o?"column":i.classList.contains("sub_column")?"subrow":"row",t=i.closest(".module_"+e);if("subrow"==e)t=t.parentNode;else if("module"===o){let e=i.querySelector(".tb_dragger_top.tb_dragger_padding");null!==e&&E.EdgeDrag.setModulePosition(e)}this.addEdges(E.Registry.get(t.dataset.cid))}}}},clearNegative(i,s){for(let t of this._coords)if(t.isConnected&&t.classList.contains("tf_dragger_negative")){let e=t.getBoundingClientRect();t.classList.toggle("tf_dragger_negative",i>=e.left&&i<=e.right&&e.top<=s&&e.bottom>=s)}else this._coords.delete(t)},async optionsClick(e){e.stopPropagation();const t=null!==e.target.closest(".tb_dragger_value"),i=(t||this.addEdgesOptions(e.target.closest(".tb_dragger_options")),"LI"===e.target.nodeName||t?e.target:e.target.parentNode);if("LI"===i.nodeName){const s=!i.classList.contains("current")&&i.parentNode.classList.contains("tb_dragger_units"),l=!s&&i.parentNode.classList.contains("tb_dragger_types"),o=E.ActionBar;o.disable=!0,(s||l)&&(E.undoManager.start("style"),s?await this.changeUnit(i):await this.changeApply(i),E.undoManager.end("style"),o.disable=null)}else t&&!i.classList.contains("tb_disable_sorting")&&this.editValue(i)},editValue(a){a.classList.add("tb_disable_sorting");let r=a.closest(".tb_dragger"),n=r.dataset.u,d=O.createElement("span"),c=O.createElement("input"),h=r.classList.contains("tb_dragger_padding")?"padding":"margin",u=r.dataset.v||0,{min:g,max:p}=this.getMinMax(h,n),_=r.closest("[data-cid]"),m=e=>{e.stopPropagation();let t=c.value;if(""!==t){let e=t.replaceAll(",",".").replace(/[^\d.-]/g,"");0<=g&&(e=e.replaceAll("-","")),e=("em"===n?parseFloat:parseInt)(e),isNaN(e)?e="":e<g?e=g:e>p&&(e=p),t!==e.toString()&&(c.value=e)}"Enter"===e.key&&f(e)},f=async e=>{e.stopPropagation();let t=c.value.replaceAll(",",".");if(t=("em"===n?parseFloat:parseInt)(t),isNaN(t)||0===t?t="":t<g?t=g:t>p&&(t=p),c.tfOff("focusout",f,{passive:!0,once:!0}).tfOff("keyup",m,{passive:!0}).remove(),d.remove(),a.textContent=t+n,t.toString()!==u){E.ActionBar.disablePosition=!0,r.dataset.v=t,a.dataset.unit=n;const i=r.matches(":hover")||0!=getComputedStyle(r).opacity,s=E.Registry.get(_.dataset.cid),l=s&&E.activeModel?.id===s.id,o=()=>{i&&(_.tfOff("transitionend transitioncancel",o,{passive:!0,once:!0}).style.transition="",this.setModulePosition(r)),setTimeout(()=>{r=n=d=m=f=_=c=null},500),E.ActionBar.disablePosition=null};O.body.classList.add("tb_edge_drag_start"),r.tfClass("tb_dragger_lightbox")[0]?.remove(),this.addEdgesOptions(r),!1===l&&E.undoManager.start("style"),i&&(_.tfOn("transitionend transitioncancel",o,{passive:!0,once:!0}).style.transition=h+" .1s ease"),this.changeUnit(a),!1===l&&E.undoManager.end("style"),a.removeAttribute("data-unit"),r.tfClass("tb_dragger_lightbox")[0]?.remove(),_.classList.remove("tb_dragger_input_mode"),O.body.classList.remove("tb_edge_drag_start"),i||o()}else _.classList.remove("tb_dragger_input_mode");a.classList.remove("tb_disable_sorting")};c.type="number",c.min=g,c.max=p,c.step="em"===n?.01:1,c.setAttribute("inputmode","em"===n?"decimal":"numeric"),c.tfOn("focusout",f,{passive:!0,once:!0}).tfOn("keyup",m,{passive:!0}).value=u,d.textContent=n,r.tfClass("tb_dragger_lightbox")[0]?.remove(),a.innerHTML="",a.append(c,d),E.SmallPanel.hide(),_.classList.add("tb_dragger_input_mode"),c.focus()},changeUnit(b){return new Promise(e=>{const t=b.closest(".tb_dragger"),r=t.classList.contains("tb_dragger_padding")?"padding":"margin",i=t.classList.contains("tb_dragger_top")||t.classList.contains("tb_dragger_bottom")?"s":"e",n=b.dataset.unit||b.textContent||"px",s=t.dataset.v,l=t.dataset.u||"px",o=t.parentNode,d=ThemifyStyles.getSheet(E.activeBreakPoint),c=d.cssRules;let h=t.tfClass("tb_dragger_types")[0],u=o.children,a=o.closest("[data-cid]"),g,p=""!==s?this.convert(t,l,n,s):"",_=E.Registry.get(a.dataset.cid),m=_.get("mod_name"),f=ThemifyStyles.getBaseSelector(m,_.get("element_id"));h=(h=h&&h.tfClass("current")[0])&&(h.classList.contains("tb_apply_all")?"all":"opposite"),g=E.Utils.findCssRule(c,f),O.body.classList.add("tb_edge_drag_start");for(let a=u.length-1;-1<a;--a){let o=u[a].classList;if(o.contains("tb_dragger_"+r)){let l="left";if(o.contains("tb_dragger_bottom")?l="bottom":o.contains("tb_dragger_right")?l="right":o.contains("tb_dragger_top")&&(l="top"),u[a]===t||h&&("opposite"!==h||("s"!=i||"left"!==l&&"right"!==l)&&("e"!=i||"top"!==l&&"bottom"!==l))){let t=u[a].tfClass("tb_dragger_units")[0],e=r+"-"+l,i=""===p?"":p+n,s="margin"!=r||"column"!==m&&"row"!==m?"#id#_"+l:"#id#-"+l;if(!1!==g&&c[g]?c[g].style.setProperty(e,i):""!==i&&(g=c.length,d.insertRule(f+"{"+e+":"+i+";}",g)),t)for(let e=(t=t.children).length-1;-1<e;--e)t[e].classList.toggle("current",t[e].textContent===n);"em"!==n&&""!==p&&(p=Math.round(p)),"padding"!=r&&this.setValueByType(u[a],m,p,n),u[a].tfClass("tb_dragger_value")[0].textContent=""===p?"":i,u[a].dataset.v=p,u[a].dataset.u=n,o.add("tb_dragger_dragged"),this.setData(_,this.getFieldId(s,_,r),p,n)}}}setTimeout(()=>{for(let e=u.length-1;-1<e;--e)u[e].classList.remove("tb_dragger_dragged");O.body.classList.remove("tb_edge_drag_start"),u=null,e()},500)})},changeApply(u){return new Promise(e=>{const t=u.closest(".tb_dragger"),i=t.parentNode,s=t.classList.contains("tb_dragger_padding")?"padding":"margin",l=t.classList.contains("tb_dragger_top")||t.classList.contains("tb_dragger_bottom")?"s":"e",o=i.closest("[data-cid]"),a=E.Registry.get(o.dataset.cid),r=u.classList.contains("current")?"":"1",n=u.nextSibling?u.nextElementSibling:u.previousElementSibling;let d="margin-top_opp_top",c;if(("margin"!=s||"column"!==a.type&&"row"!==a.type)&&(c="checkbox_#id#_apply_all",d="#id#_opp_",d+="s"==l?"top":"left",u.classList.contains("tb_apply_all"))){const h=d;d=c,c=h}n?.classList.remove("current"),u.classList.toggle("current",r),this.setData(a,this.getFieldId(d,a,s),r),c&&this.setData(a,this.getFieldId(c,a,s),""),this.changeUnit(t.tfClass("tb_dragger_units")[0].tfClass("current")[0]).then(()=>{this.onChange(),e()})})},convert(e,t,i,s){if(!s)return 0;if((t=t||"px")===(i=i||"px"))return s;let l,o=e.parentNode;if(o.classList.contains("active_module")){const c=o.classList.contains("active_subrow")?"module_subrow":"module";o=o.tfClass(c)[0]}const a="em"===i||"em"===t?parseFloat(getComputedStyle(o).fontSize):null,r="%"===i||"%"===t?o.parentNode.offsetWidth:null,{min:n,max:d}=this.getMinMax(e.classList.contains("tb_dragger_padding")?"padding":"margin",i);return"px"===t?"em"===i?l=+parseFloat(s/a).toFixed(2):"%"===i&&(l=parseFloat(100*s/r)):l="%"===t?(l=parseFloat(s*r/100),"em"===i?+parseFloat(l/a).toFixed(2):parseFloat(l)):(l=parseFloat(s*a),"%"===i&&(l=parseFloat(100*l/r)),parseFloat(l)),l=Number(l.toFixed(2)),(l=Number(l.toFixed(2)))<n?l=n:l>d&&(l=d),l},getMinMax(e,t){const i=ThemifyConstructor.getMarginPaddingUnits(e,t),s=i.min||0,l=i.max||100;return{min:s,max:l}},setValueByType(e,t,i,s){let l="margin";s=s||"px";const o=e.classList;for(let e=o.length-1;-1<e;--e)if("tb_dragger_top"===o[e]||"tb_dragger_bottom"===o[e]||"tb_dragger_left"===o[e]||"tb_dragger_right"===o[e]){l+="-"+o[e].replace("tb_dragger_","");break}"px"!==s&&""!==i&&(i=this.convert(e,s,"px",i),s="px"),i!==k&&null!==i||(i="");const a="margin-top"===l||"margin-bottom"===l?"height":"width";e.style[a]=""===i?"":(0<i?i:-i)+s,"row"!==t&&"column"!==t||(e.style[l]=""===i?"":-i+s)},getFieldId(e,t,i){const s=t.type,l=ThemifyStyles.getStyleOptions(t.get("mod_name"));return"margin"===i&&("row"===s||"column"===s)||l[i+"_top"]!==k&&l[i+"_top"].type===i||(i=i[0]),e.replace("#id#",i)},getCurrentStyling(t,e,i){const s=e.get("styling");if(t=this.getFieldId(t,e,i),E.activeModel?.id===e.id){let e=E.LightBox.el.querySelector("#"+t);if(null!==e){if(!e.classList.contains("tb_checkbox_wrap"))return e.value;if(e=e.tfClass("tb_checkbox")[0])return!!e.checked&&e.value}}let l=ThemifyStyles.getStyleVal(t,s,E.activeBreakPoint);return l=l!==k&&""!==l&&"column"===e.type&&l.toString().includes(",")&&(0===t.indexOf("padding")||t.includes("margin"))?((l=l.trim().split(","))[1]!==k&&""!==l[1]?l[1]:l[0]).trim():l},setData(e,t,i,s){if(i&&s&&"em"!==s&&(i=Number(i)),e.id===E.activeModel?.id){let e=E.LightBox.el.querySelector("#"+t);if(null!==e)return e.classList.contains("tb_checkbox_wrap")?(e=e.tfClass("tb_checkbox")[0])&&(e.checked=!!i):(e.value=i,(e=E.LightBox.el.querySelector("#"+t+"_unit"))&&(e.value=s)),void(e&&T.triggerEvent(e,"change"));{const o=ThemifyConstructor.values;"desktop"===E.activeBreakPoint?(o[t]=i,s&&(o[t+"_unit"]=s)):(o["breakpoint_"+E.activeBreakPoint]||(o["breakpoint_"+E.activeBreakPoint]={}),o["breakpoint_"+E.activeBreakPoint][t]=i,s&&(o["breakpoint_"+E.activeBreakPoint][t+"_unit"]=s))}}const l=E.Helper.cloneObject(e.get("mod_settings"));"desktop"!==E.activeBreakPoint?(l["breakpoint_"+E.activeBreakPoint]||(l["breakpoint_"+E.activeBreakPoint]={}),l["breakpoint_"+E.activeBreakPoint][t]=i,s&&(l["breakpoint_"+E.activeBreakPoint][t+"_unit"]=s)):(i?l[t]=i:delete l[t],s&&("px"===s?delete l[t+"_unit"]:l[t+"_unit"]=s)),e.set("mod_settings",l)},onChange(){setTimeout(()=>{E.Utils._onResize(!0)},1500)},setModulePosition(t){let i=O.tfId("tb_component_bar");if(null!==i){const e=t.tfClass("tb_dragger_value")[0];if(i.style.marginTop="",e?.firstChild){const s=e.getBoundingClientRect(),l=i.getBoundingClientRect();if(l.bottom>=s.top){let e=i.offsetTop||0;i.style.marginTop=t.offsetHeight/2+s.height+(e<0?-1*e:0)+"px"}}}},drag(e){if(1===e.which){const w=e.target;if(w.closest(".tb_dragger_options")){const l=this,t=e.target;void O.tfOn("pointerup",function(e){if(t===e.target){if(e.target.classList.contains("tb_dragger_arrow")){this.body.classList.add("tb_dragger_options_open");let i=t.closest(".tb_dragger");const s=e=>{if("pointerleave"===e.type||!e.target.closest(".tb_dragger_options")){this.tfOff(T.click,s,{passive:!0}),B.document.tfOff(T.click,s,{passive:!0}),i.tfOff("pointerleave",s,{once:!0,passive:!0}),i.classList.contains("tb_dragger_padding")&&i.classList.contains("tb_dragger_top")&&l.setModulePosition(i),this.body.classList.remove("tb_dragger_options_open");const t=i.tfClass("tb_dragger_lightbox")[0];t?.remove(),i=null}};setTimeout(()=>{i.tfOn("pointerleave",s,{once:!0,passive:!0}),this.tfOn(T.click,s,{passive:!0}),B.document.tfOn(T.click,s,{passive:!0})},10)}l.optionsClick(e)}},{once:!0,passive:!0})}else if(w.classList.contains("tb_dragger")){e.stopImmediatePropagation();const L=this,k=w.closest("[data-cid]"),x=E.Registry.get(k.dataset.cid);if(x){let c=[],t,l=e.clientX,h=e.clientY,u,o,i,a=l,r=h,g,p,_=x.type,m=!1,f="module"===_?k.tfClass("module")[0]:"subrow"===_?k.tfClass("module_subrow")[0]:k,b=w.classList.contains("tb_dragger_padding")?"padding":"margin",n=w.classList.contains("tb_dragger_top")||w.classList.contains("tb_dragger_bottom")?"s":"e",y="s"===n?w.classList.contains("tb_dragger_top")?"top":"bottom":w.classList.contains("tb_dragger_left")?"left":"right",v=w.dataset.u||"px",d=(e,t,i)=>{let s="left"===i||"right"===i?Math.abs(e-a):Math.abs(t-r),l="%"===v?1:Math.round(s);return l<=0?l="px"===v||"%"===v?1:.1:"em"===v&&(l/=10),a=e,r=t,l},s=e=>{e.stopImmediatePropagation(),m=!0,O.body.classList.add("tb_start_animate","tb_edge_drag_start"),B.document.body.classList.add("tb_start_animate","tb_edge_drag_start"),E.SmallPanel.hide(),E.ActionBar.clear(),E.ActionBar.disable=!0,w.tfClass("tb_dragger_lightbox")[0]?.remove(),!1===(i=E.activeModel?.id===x.id)&&E.undoManager.start("style"),L.addEdgesOptions(w),u=parseFloat(w.dataset.v)||0,u="em"!==v?parseInt(u):Number(u.toFixed(2)),o=(o=(o=w.tfClass("tb_dragger_types")[0])&&o.tfClass("current")[0])&&(o.classList.contains("tb_apply_all")?"all":"opposite");const s=w.parentNode.children,t=L.getMinMax(b,v);g=t.min||0,p=t.max||100;for(let i=s.length-1;-1<i;--i){let t=s[i].classList;if(t.contains("tb_dragger_"+b)){let e="left";t.contains("tb_dragger_bottom")?e="bottom":t.contains("tb_dragger_right")?e="right":t.contains("tb_dragger_top")&&(e="top"),(y===e||o&&("opposite"!==o||("s"!==n||"left"!==e&&"right"!==e)&&("e"!==n||"top"!==e&&"bottom"!==e)))&&(s[i].classList.add("tb_dragger_dragged"),c.push({el:s[i],prop:b+"-"+e,text:s[i].tfClass("tb_dragger_value")[0]}))}}k.classList.add("tb_element_clicked")},S=s=>{s.stopImmediatePropagation(),t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{const e=s.clientX,t=s.clientY,i=d(e,t,y),o=("e"===n?e!==h&&(e>h?"left"===y?u+=i:u-=i:"left"===y?u-=i:u+=i):t!==l&&(t>l?u+=i:u-=i),h=e,l=t,u<0&&"padding"===b?u=0:u%1!=0&&(u=parseFloat(u.toFixed(1))),u>p?u=p:u<g&&(u=g),u+v);for(let t=c.length-1;-1<t;--t){let s=c[t].prop,l=c[t].el,e=c[t].text;if(f.style[s]=o,"margin"===b){let e=l.classList.contains("tb_dragger_top")||l.classList.contains("tb_dragger_bottom")?"height":"width",t=u,i=v;"px"!==i&&(t=L.convert(l,i,"px",t),i="px"),"row"!==_&&"column"!==_||(l.style[s]=""===o?"":-t+i),l.style[e]=u<0?-t+i:t+i}e.textContent=0===u?"":o}})},C=function(e){t&&cancelAnimationFrame(t),this.style.willChange=f.style.willChange="",this.tfOff("pointermove",s,{passive:!0,once:!0}).tfOff("pointermove",S,{passive:!0}).tfOff("lostpointercapture pointerup",C,{once:!0,passive:!0}),T.trigger("tbDisableInline"),m?(e.stopImmediatePropagation(),O.body.classList.remove("tb_start_animate","tb_edge_drag_start"),B.document.body.classList.remove("tb_start_animate","tb_edge_drag_start"),T.trigger("tbresizeImageEditor"),requestAnimationFrame(()=>{k.classList.remove("tb_element_clicked");const a=ThemifyStyles.getBaseSelector(x.get("mod_name"),x.get("element_id")),r=ThemifyStyles.getSheet(E.activeBreakPoint),n=r.cssRules,d=E.Utils.findCssRule(n,a);for(let o=c.length-1;-1<o;--o){let e=c[o].el,t=c[o].prop,i=f.style[t],s=t.replace(b+"-",""),l="margin"!==b||"column"!==_&&"row"!==_?"#id#_"+s:"#id#-"+s;0===u&&"margin"===b&&(e.style.setProperty(t,""),e.style.width=e.style.height=""),e.tfClass("tb_dragger_lightbox")[0]?.remove(),!1!==d&&n[d]?n[d].style.setProperty(t,i):r.insertRule(a+"{"+t+":"+i+";}",n.length),f.style[t]="",e.dataset.v=u,e.dataset.u=v,e.classList.remove("tb_dragger_dragged"),L.setData(x,L.getFieldId(l,x,b),u,v)}"padding"===b&&"top"===y&&"module"===_&&L.setModulePosition(c[0].el),L.onChange(),E.Utils.runJs(k,null,!0),!1===i&&E.undoManager.end("style"),E.ActionBar.disable=o=f=t=i=c=u=l=h=g=p=m=null,L.addEdges(x)})):L.addEdges(x)};f.style.willChange=b,w.style.willChange="margin"===b?"top"===y||"bottom"===y?"height":"width":b,w.tfOn("lostpointercapture pointerup",C,{once:!0,passive:!0}).tfOn("pointermove",s,{passive:!0,once:!0}).tfOn("pointermove",S,{passive:!0}).setPointerCapture(e.pointerId)}}}}},E.createStyleInstance=()=>new l})(Themify,window,window.top,document,tb_app,void 0);