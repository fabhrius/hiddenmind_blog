((L,b,C,w)=>{"use strict";let f=null,g=null,y=null,h=!1,c=null;const _={"list-post":100,"list-large-image":100,"list-thumb-image":100,grid2:48.4,"grid2-thumb":48.4,grid3:31.2,grid4:22.6,grid5:17.44,grid6:14},S=new Set,s=(t,e)=>{e&&"object"==typeof e||("0"===(e={layoutMode:t.dataset.layout,gutter:t.dataset.gutter,columnWidth:t.dataset.column,itemSelector:t.dataset.selector,fitWidth:"1"===t.dataset.fit,percentPosition:"0"!==t.dataset.percent}).gutter&&(e.gutter=!1),"0"===e.columnWidth&&(e.columnWidth=!1)),e.layoutMode||(t.classList.contains("packery-gallery")?(e.layoutMode="packery",e.columnWidth=e.gutter=!1):t.classList.contains("masonry-fit-rows")&&(e.layoutMode="fitRows"));const p={originLeft:!L.isRTL,resize:!1,containerStyle:null,onceLayoutComplete:e.onceLayoutComplete,layoutComplete:e.layoutComplete,arrangeComplete:e.arrangeComplete,removeComplete:e.removeComplete,filterCallback:e.filterCallback,stagger:e.stagger||30,itemSelector:e.itemSelector},u=e.layoutMode||"masonry";p.layoutMode=u,p[u]={columnWidth:e.columnWidth,gutter:e.gutter},p.itemSelector||(p.itemSelector=t.classList.contains("products")?".products>.product":t.classList.contains("gallery-wrapper")?".item":".loops-wrapper > .post"),!0===e.fitWidth&&(p[u].fitWidth=!0),e.stamp&&(p.stamp=e.stamp),!0===e.fitWidth?p.percentPosition=!1:p.percentPosition=e.percentPosition===w||e.percentPosition,L.imagesLoad(t).then(a=>{const t=a.previousElementSibling;let s="",e=0,o=!1!==p[u].gutter&&!a.classList.contains("no-gutter"),i=a.tfClass("gutter-sizer")[0];const l=Isotope.data(a),n=()=>{i&&(i.remove(),i=!1)};if(l&&(l.destroy(),n()),a.classList.contains("auto_tiles"))t?.classList.contains("post-filter")&&L.trigger("themify_isotop_filter",[t,w,p.filterCallback]);else{for(let t=a.classList,e=t.length-1;-1<e;--e)if(_[t[e].trim()]!==w){s=t[e].trim();break}if("list-post"===s||"list-large-image"===s||"list-thumb-image"===s){if(!t?.classList.contains("post-filter"))return void n();o=!1}if(!S.has("masonry_done")){S.add("masonry_done");const c=".masonry>.post,.products.masonry>.product{animation-fill-mode:backwards;transition:none;animation:none;clear:none!important;margin-right:0!important;margin-left:0!important}.masonry-done{opacity:1}";null===f?((f=C.createElement("style")).innerText=c,C.head.prepend(f)):f.innerText+=c}if(!0===o){if(i?e=i:((e=C.createElement("div")).className="gutter-sizer",a.prepend(e)),!a.classList.contains("tf_fluid")){let e="";const d=a.classList.contains("products"),m=a.classList.contains("gutter-narrow")?1.6:3.2;if(!S.has(m+d)){S.add(m+d);let t=d?".products":"";1.6==m&&(t+=".gutter-narrow"),""!==t&&(t+=">"),e+=t+".gutter-sizer{width:"+m+"%}"}S.has("contain")||(S.add("contain"),e+=".gutter-sizer{contain:paint style size}@media (max-width:680px){.gutter-sizer{width:0}}"),e&&(f.innerText=e+f.innerText)}}else n();p[u].gutter=e,a.classList.add("masonry-done","tf_rel");const r=new Isotope(a,p);(t=>{null===y&&(y=new ResizeObserver((a,t)=>{setTimeout(()=>{!0!==h&&(null!==g&&cancelAnimationFrame(g),h=!0,g=requestAnimationFrame(()=>{for(let e=a.length-1;-1<e;--e)if(a[e].target.isConnected){let t=a[e].target.closest(".masonry-done");t&&b.Isotope.data(t)?.layout()}else t.unobserve(a[e].target);h=!1}))},800)})),setTimeout(()=>{y.observe(t)},300)})(a),t?.classList.contains("post-filter")&&L.trigger("themify_isotop_filter",[t,r,p.filterCallback]),r.revealItemElements(r.items),p.onceLayoutComplete&&r.once("layoutComplete",p.onceLayoutComplete),p.layoutComplete&&r.on("layoutComplete",p.layoutComplete),p.arrangeComplete&&r.on("arrangeComplete",p.arrangeComplete),p.removeComplete&&r.on("removeComplete",p.removeComplete),r.layout()}})};L.on("tf_isotop_init",(e,a)=>{for(let t=(e=e.length===w?[e]:e).length-1;-1<t;--t)L.requestIdleCallback(()=>{s(e[t],a)},-1,500)}).on("themify_isotop_filter",(g,t,r)=>{if(!g.dataset.done){g.dataset.done=1;const c=g.children,y=c.length,o=g.nextElementSibling,h=g.hasAttribute("data-ajax"),_=!0===h&&g.hasAttribute("data-sort");let s=0;if(!S.has("post_filter")){S.add("post_filter");const e=".post-filter{transition:opacity .2s ease-in-out}";null===f?((f=C.createElement("style")).innerText=e,C.head.prepend(f)):f.innerText+=e}if(!1===h)for(let a=y-1;-1<a;--a){let t=c[a].className.replace(/(current-cat)|(cat-item)|(-)|(active)/g,"").replace(" ",""),e=o.querySelector(".cat-"+t);null===e||e.parentNode!==o?(c[a].style.display="none",++s):c[a].style.display=""}if(1<y-s?(g.classList.remove("tf_opacity"),g.style.display=""):g.style.display="none",t||o.classList.contains("auto_tiles")){let n;const v=function(d){d.preventDefault();const m=d.target.closest(".cat-item"),p=g.parentNode.classList;if(p.remove("tb_hide_loadmore"),m){let c="*";const u=this.nextElementSibling;if(m.classList.contains("active")){if(m.classList.remove("active"),!0===_)return void L.triggerEvent(g.querySelector(".cat-item-all"),L.click)}else{if(this.querySelector(".cat-item.active")?.classList.remove("active"),m.classList.contains("cat-item-all")||(c=m.className.replace(/(current-cat)|(cat-item)|(-)|(active)/g,"").replace(" ","")),m.dataset.p||(m.dataset.p=1),!0===h&&(m.dataset.done&&p.add("tb_hide_loadmore"),p.toggle("tb_empty_filter",!!m.dataset.empty)),!(!0!==h||m.dataset.done||m.dataset.loading||m.dataset.init)){m.dataset.init=!0,m.dataset.loading=!0,u.parentNode.classList.contains("tf_ajax_filter_loading")?n.abort():u.parentNode.classList.add("tf_ajax_filter_loading"),n=new AbortController;const f=this,t=new FormData;if(t.set("action","themify_ajax_load_more"),t.set("type","module"),t.set("module",g.dataset.el),t.set("id",g.dataset.id),t.set("page",m.dataset.p),"*"!==c&&t.set("tax",c),!0===_){const e=g.querySelector(".tf_ajax_sort_order.active"),a=g.querySelector(".tf_ajax_sort_order_by .active");e&&t.set("order",e.dataset.type),a&&t.set("orderby",a.dataset.orderBy)}return void L.fetch(t,"html",{signal:n.signal}).then(t=>{const e=t.querySelector("."+g.dataset.el+" .loops-wrapper"),a=t.querySelector(".load-more-button");let s,o;if(null!==e){s=L.convert(e.children);const i=C.createDocumentFragment(),l=s.length;if(s[0]!==w){for(let t=0;t<l;++t)s[t].className+=" tf_opacity",i.appendChild(s[t]);g.dataset.reload&&(o=u.querySelectorAll(".post"),delete g.dataset.reload),u.appendChild(i)}if(null===a)m.dataset.done=!0,p.add("tb_hide_loadmore");else if("*"===c){const n=u.parentNode.querySelector(".load-more-button");n&&(n.href=n.dataset.url,n.dataset.page=a.dataset.page)}if(0<s.length)m.dataset.p=parseInt(m.dataset.p)+1,L.trigger("tf_isotop_append",[{new:s,remove:o},u,()=>{u.parentNode.classList.remove("tf_ajax_filter_loading"),v.bind(f)(d)}]);else{if(m.dataset.empty=!0,null===u.parentNode.querySelector(".tb_empty_filter_msg")){const r=C.createElement("span");r.className="tb_empty_filter_msg tf_hide",r.innerText=themify_vars.nop,u.parentNode.appendChild(r)}u.parentNode.classList.remove("tf_ajax_filter_loading"),v.bind(f)(d)}}}).catch(t=>{console.warn("Ajx filter error!",t)})}!0===h&&m.dataset.loading&&delete m.dataset.loading,m.className+=" active"}if(null!==u){g.hasAttribute("data-hash")&&(m.classList.contains("active")&&m.dataset.id?location.hash=m.dataset.id:b.location.hash.includes(g.dataset.hash)&&b.history.pushState("","",b.location.pathname));let e=b.Isotope.data(u);if(u.classList.contains("auto_tiles")){const s=u.children;for(let t=s.length-1;-1<t;--t)s[t].classList.contains("post")&&!s[t].style.width&&(s[t].style.width=s[t].offsetWidth+"px",s[t].style.height=s[t].offsetHeight+"px");if(u.classList.add("masonry-done"),!e){let t;L.w<680?t=0:(t=b.getComputedStyle(u).getPropertyValue("grid-row-gap"))?t=parseFloat(t):"0"!=t&&(t=5),e=new Isotope(u,{layoutMode:"packery",packery:{gutter:t},resize:!1})}if("*"===c){const o=function(){this.off("arrangeComplete",o),setTimeout(()=>{if("*"===c){const a=this.element.children;for(let e=a.length-1;-1<e;--e)if(a[e].classList.contains("post")){let t=a[e].style;t.width=t.height=t.position=t.left=t.top=""}this.element.classList.remove("masonry-done"),this.element.style.height=this.element.style.position=""}},20)};e.once("arrangeComplete",o)}}e&&(c=!0===h?"*"===c?".initial-cat":".ajax-cat-"+c:"*"===c?c:".cat-"+c.trim()+",.cat-all",e.arrange({filter:c}),r?.call(e,m,c))}}else if(!0===_){const i=d.target.closest(".tf_ajax_sort_order")||d.target.closest("[data-order-by]")?d.target:null;if(null!==i&&!i.classList.contains("active")){i.parentNode.querySelector(".active")?.classList.remove("active"),i.className+=" active";for(let t=y-1;-1<t;--t)delete c[t].dataset.init,delete c[t].dataset.done,delete c[t].dataset.p;g.dataset.reload=!0;const l=g.querySelector(".cat-item.active")||g.querySelector(".cat-item-all");l&&(l.classList.remove("active"),L.triggerEvent(l,L.click))}}},a=(g.tfOn(L.click,v),b.location.hash.replace("#",""));if(""!==a&&"#"!==a){const i=g.querySelector('[data-id="'+a+'"]');i&&L.triggerEvent(i,L.click)}}}}).on("tf_isotop_append",(s,o,i)=>{const l=s.new.length,n=b.Isotope?.data(o);null===c&&(c=/^((?!chrome|android).)*safari/i.test(navigator.userAgent));let r=0;for(let a=0;a<l;++a)s.new[a].style.display="none",L.imagesLoad(s.new[a]).then(t=>{if(c){const e=t.querySelector("img[srcset]");null!==e&&(e.outerHTML=e.outerHTML)}if(++r,n&&n.appended(t),s.new[a].classList.remove("tf_opacity"),r===l){(n||o.classList.contains("auto_tiles"))&&(o.classList.contains("auto_tiles")&&L.autoTiles(o),n)&&s.remove&&n.remove(s.remove);for(let t=0;t<l;++t)L.lazyScroll(L.convert(L.selectWithParent("[data-lazy]",s.new[t])).reverse(),!0);L.fonts(),i()}})})})(Themify,window,document,void 0);